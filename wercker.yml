# wercker version for box creation
box: amarburg/lsdslam-dev-host:conan-latest

dev:
  steps:
    - script:
      name: Build
      code: |
           LSDSLAM_BUILD_DIR=build_wercker rake debug:test

build-cmake:
  steps:
    - script:
      name: Build
      code: |
           LSDSLAM_BUILD_DIR=build_wercker rake debug:test debug:clean

build-conan:
  steps:
    - script:
      name: Build
      code: |
           LSDSLAM_BUILD_DIR=build_wercker rake conan:debug:test conan:debug:clean

    - script:
      name: Upload to conan.io
      code: |
        conan user -p "$CONAN_PASSWORD" $CONAN_USERNAME
        conan upload "*@amarburg/testing" --confirm
